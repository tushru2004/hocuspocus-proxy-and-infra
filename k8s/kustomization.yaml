apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: hocuspocus

resources:
  - namespace.yaml
  - configmaps.yaml
  - pvcs.yaml
  - postgres-statefulset.yaml
  - mitmproxy-deployment.yaml
  - vpn-deployment.yaml
  - services.yaml

# Common labels for all resources
commonLabels:
  app.kubernetes.io/name: hocuspocus-vpn
  app.kubernetes.io/managed-by: argocd

# Image customization for GCP Artifact Registry
images:
  - name: REGISTRY/vpn
    newName: europe-west1-docker.pkg.dev/hocuspocus-vpn/hocuspocus-vpn/vpn
    newTag: f9025fc
  - name: REGISTRY/mitmproxy
    newName: europe-west1-docker.pkg.dev/hocuspocus-vpn/hocuspocus-vpn/mitmproxy
    newTag: f9025fc
